{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block title_append %}Login{% endblock %}
{% block breadcrumb %}{% endblock %}
{% block content %}
<div class="d-flex justify-content-center align-items-center my-4">
    <div class="card border-0 shadow-lg col-11 col-md-8 col-lg-4">
        <div class="bg-primary py-2 rounded-top"></div>

        <div class="card-body p-4 mb-4">
            <h2 class="text-center mb-4 mt-2 text-body">Login</h2>

            <form method="post" class="login-form">
                {% csrf_token %}

                {{ form|crispy }}

                <div class="form-check mb-3">
                    <input type="checkbox" class="form-check-input" id="showPassword" onclick="togglePassword()">
                    <label class="form-check-label" for="showPassword">
                        <i class="fas fa-eye-slash" id="toggleIcon"></i> Mostrar senha
                    </label>
                </div>

                <button type="submit" class="btn btn-primary w-100 py-2 fw-bold mb-3">
                    Entrar
                </button>

                <div class="text-center">
                    <a href="#" class="text-decoration-none link-primary link-offset-2-hover">
                        Esqueceu sua senha?
                    </a>
                </div>
            </form>

            <div class="text-center mt-4 pt-3">
                <span class="text-body-tertiary">Não possui uma conta?</span>
                <a href="#" class="text-decoration-none link-primary link-offset-2-hover ms-1">
                    Cadastre-se
                </a>
            </div>
        </div>

        <div class="bg-primary py-1 rounded-bottom"></div>
    </div>
</div>

<script>
    function togglePassword() {
        const passwordField = document.querySelector('#id_password');
        const toggleIcon = document.querySelector('#toggleIcon');
        
        if (passwordField.type === "password") {
            passwordField.type = "text";
            toggleIcon.classList.replace('fa-eye-slash', 'fa-eye');
        } else {
            passwordField.type = "password";
            toggleIcon.classList.replace('fa-eye', 'fa-eye-slash');
        }
    }

    // Adiciona verificação inicial
    document.addEventListener('DOMContentLoaded', () => {
        const passwordField = document.querySelector('#id_password');
        const toggleIcon = document.querySelector('#toggleIcon');
        
        if (passwordField && toggleIcon) {
            passwordField.type = "password";
            toggleIcon.classList.add('fa-eye-slash');
        }
    });
</script>
{% endblock %}